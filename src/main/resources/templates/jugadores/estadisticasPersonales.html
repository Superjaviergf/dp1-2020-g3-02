<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8" />
<!-- Bootstrap CSS -->
<link rel="stylesheet"
	href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"
	integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2"
	crossorigin="anonymous">

<!--  Datatables  -->
<link rel="stylesheet" type="text/css"
	href="https://cdn.datatables.net/v/bs4/dt-1.10.20/datatables.min.css" />

<!--  extension responsive  -->
<link rel="stylesheet" type="text/css"
	href="https://cdn.datatables.net/responsive/2.2.3/css/responsive.dataTables.min.css">
<title>Listado de Jugadores</title>
<title>Jugadores</title>
</head>
<body class="bg-light">
	
	<script src="https://www.w3schools.com/lib/w3data.js"></script>
	
	<div class="">
	<div w3-include-html="navbar?id=estadisticasPartido"></div>
	</div>

	<div class="container-fluid">
		<div class="row">
			<div class="py-3 text-center col-lg-12">
				<h1 class="font-weight-bold font-italic">ESTADISITICAS JUGADOR</h1>
			</div>
		</div>


		<div class="row">
			<div class="col-lg-12 responsive">
				<table id="estadisiticas"
					class="table table-sm table-striped table-bordered table-hover nowrap"
					cellspacing="0" style="width: 100%;">
					<thead>
						<tr class="table-primary">
							<th>ID</th>
							<th>SAQUES_ACERTADOS</th>
							<th>SAQUES_TOTALES</th>
							<th>PORCENTAJE_SAQUES</th>
						</tr>
					</thead>
					<tbody>
						<tr th:each="estadistica : ${estadisticas}">
							<td th:text="${estadistica.id}"></td>
							<td th:text="${estadistica.saquesAcertados}"></td>
							<td th:text="${estadistica.saquesTotales}"></td>
							<td th:text="${estadistica.porcentajeSaques}"></td>
						</tr>
					</tbody>

				</table>
			</div>
		</div>
	</div>



	<script src=https://code.jquery.com/jquery-3.5.1.js></script>
	<!-- Optional JavaScript -->
	<script
		src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
		integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
		crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js" integrity="sha384-w1Q4orYjBQndcko6MimVbzY0tgp4pWB4lZ7lr30WKz0vr/aWKhXdBNmNb5D92v7s" crossorigin="anonymous"></script>

	<!--   Datatables-->
		
	<script type="text/javascript"
		src="https://cdn.datatables.net/1.10.22/js/jquery.dataTables.min.js"></script>

	<!-- extension responsive -->
	<script
		src="https://cdn.datatables.net/responsive/2.2.3/js/dataTables.responsive.min.js"></script>
		
	<script type="text/javascript"
		src="https://cdn.datatables.net/select/1.3.1/js/dataTables.select.min.js"></script>
		
	<script type="text/javascript"
		src="//code.highcharts.com/highcharts.js"></script>
	
	<script>
	$(document).ready(function () {
	    // Create DataTable
	    var table = $('#estadisiticas').DataTable({
	        dom: 'Pfrtip',
	    });
	 
	    // Create the chart with initial data
	    var container = $('<div/>').insertBefore(table.table().container());
	 
	    var chart = Highcharts.chart(container[0], {
	        chart: {
	            type: 'column',
	        },
	        title: {
	            text: 'Estadísticas jugador',
	        },
	        xAxis: {
	            categories: [
	                '2020/07/01',
	                '2020/07/02',
	                '2020/07/05',
	                '2020/07/01',
	                '2020/07/02',
	                '2020/07/05'
	            ],
	            crosshair: true
	        },
	        yAxis: {
	            min: 0,
	            title: {
	                text: 'Estadísticas'
	            }
	        },
	        tooltip: {
	            headerFormat: '<span style="font-size:10px">{point.key}</span><table>',
	            pointFormat: '<tr><td style="color:{series.color};padding:0">{series.name}: </td>' +
	                '<td style="padding:0"><b>{point.y:.1f} mm</b></td></tr>',
	            footerFormat: '</table>',
	            shared: true,
	            useHTML: true
	        },
	        plotOptions: {
	            column: {
	                pointPadding: 0.2,
	                borderWidth: 0
	            }
	        },
	        series: [
	            {
	            	name: 'Saques Acertados',
	            	data: chartData(table),
	            	
	            },
	            {
	            	name: 'Saques Totales',
	            	data: chartData2(table),
	            }
	
	        ],
	    });
	    
	    table.on('draw', function () {
	        chart.series[0].setData(chartData(table));
	    });
	    
	});
	    function chartData(table) {
	        var counts = {};
	     	var names = [];
	     	var dato = [];
	        
	        // Count the number of entries for each position
	        table
	            .column(0, { search: 'applied' })
	            .data()
	            .each(function (val) {
	            	names.push( parseInt(val,10));
	            });
	        
	        table
            .column(1, { search: 'applied' })
            .data()
            .each(function (val) {
            	dato.push( parseInt(val,10));
            });
	        
	        for (i = 0; i < 6; i++){
	        	counts[names[i]] = dato[i];
	        }
	        
	       
	     
	        // And map it to the format highcharts uses
	        return $.map(counts, function (val, key) {
	            return {
	                name: key,
	                y: val,
	            };
	        });
	    }
	    
	    function chartData2(table) {
	        var counts = {};
	     	var names = [];
	     	var dato = [];
	        
	        // Count the number of entries for each position
	        table
	            .column(0, { search: 'applied' })
	            .data()
	            .each(function (val) {
	            	names.push( parseInt(val,10));
	            });
	        
	        table
            .column(2, { search: 'applied' })
            .data()
            .each(function (val) {
            	dato.push( parseInt(val,10));
            });
	        
	        for (i = 0; i < 6; i++){
	        	counts[names[i]] = dato[i];
	        }
	        
	       
	     
	        // And map it to the format highcharts uses
	        return $.map(counts, function (val, key) {
	            return {
	                name: key,
	                y: val,
	            };
	        });
	    }
	     
	
	</script>
	
	<script type="text/javascript">
       w3IncludeHTML();
	</script>
</body>
</html>